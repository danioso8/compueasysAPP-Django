{% load static %}
{% load humanize %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¡Pago Exitoso! - CompuEasys</title>
    
    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <!-- AOS Animation -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/pago_exitoso.css' %}">
    
    <!-- Estilos de fallback -->
    <style>
        .success-page { min-height: 100vh; background: #f8f9fa; }
        .success-card { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin: 2rem auto; max-width: 600px; }
        .success-icon { width: 100px; height: 100px; background: #28a745; border-radius: 50%; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; }
        .success-icon i { font-size: 3rem; color: white; }
        .btn-whatsapp { background: #25d366; color: white; border: none; padding: 12px 24px; border-radius: 25px; text-decoration: none; display: inline-block; margin: 0.5rem; }
        .btn-whatsapp:hover { background: #128c7e; color: white; }
        .text-center { text-align: center; }
    </style>
    
    <!-- Meta SEO -->
    <meta name="description" content="¡Tu pago ha sido procesado exitosamente! Gracias por tu compra en CompuEasys.">
    <meta name="robots" content="noindex, nofollow">
</head>
<body class="success-page">
    <!-- Navegación -->
    {% include 'navbarr.html' %}
    
    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas"></canvas>
    
    <!-- Success Hero Section -->
    <section class="success-hero">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-xl-6">
                    <div class="success-card" data-aos="zoom-in" data-aos-duration="800">
                        <!-- Success Icon -->
                        <div class="success-icon-wrapper">
                            <div class="success-icon">
                                <i class="bi bi-check-circle-fill"></i>
                            </div>
                            <div class="success-pulse"></div>
                        </div>
                        
                        <!-- Success Message -->
                        <div class="success-content">
                            <h1 class="success-title" data-aos="fade-up" data-aos-delay="200">
                                ¡Pago Exitoso!
                            </h1>
                            <h2 class="success-subtitle" data-aos="fade-up" data-aos-delay="300">
                                Gracias por tu compra, <span class="customer-name">{{ nombre|default:"Cliente" }}</span>
                            </h2>
                            <p class="success-message" data-aos="fade-up" data-aos-delay="400">
                                Tu pedido ha sido procesado exitosamente. Te hemos enviado un correo de confirmación 
                                y pronto recibirás tu producto. ¡Esperamos que disfrutes tu compra!
                            </p>
                        </div>
                        
                        <!-- Order Details -->
                        <div class="order-summary" data-aos="fade-up" data-aos-delay="500">
                            <div class="order-header">
                                <i class="bi bi-receipt"></i>
                                <span>Resumen de tu pedido</span>
                            </div>
                            <div class="order-info">
                                <div class="order-item">
                                    <span class="label">Número de orden:</span>
                                    <span class="value">#{% if order_number %}{{ order_number }}{% else %}PE-{% now "YmdHis" %}{% endif %}</span>
                                </div>
                                <div class="order-item">
                                    <span class="label">Estado:</span>
                                    <span class="value status-confirmed">
                                        <i class="bi bi-check-circle"></i>
                                        Confirmado
                                    </span>
                                </div>
                                <div class="order-item">
                                    <span class="label">Fecha:</span>
                                    <span class="value">{% now "d/m/Y H:i" %}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="success-actions" data-aos="fade-up" data-aos-delay="600">
                            <!-- WhatsApp Button -->
                            <a href="{% if whatsapp_url %}{{ whatsapp_url }}{% else %}https://wa.me/573007915262?text=Hola, he realizado una compra en CompuEasys{% endif %}" target="_blank" class="btn btn-whatsapp" id="whatsapp-btn">
                                <i class="bi bi-whatsapp"></i>
                                <span>Enviar pedido por WhatsApp</span>
                                <div class="btn-shine"></div>
                            </a>
                            
                            <!-- Continue Shopping -->
                            <a href="{% url 'store' %}" class="btn btn-secondary-custom">
                                <i class="bi bi-shop"></i>
                                Continuar comprando
                            </a>
                            
                            <!-- My Orders -->
                            <a href="{% url 'home' %}" class="btn btn-outline-custom">
                                <i class="bi bi-house"></i>
                                Volver al inicio
                            </a>
                        </div>
                        
                        <!-- Trust Indicators -->
                        <div class="trust-indicators" data-aos="fade-up" data-aos-delay="700">
                            <div class="trust-item">
                                <i class="bi bi-shield-check"></i>
                                <span>Compra segura</span>
                            </div>
                            <div class="trust-item">
                                <i class="bi bi-truck"></i>
                                <span>Envío rápido</span>
                            </div>
                            <div class="trust-item">
                                <i class="bi bi-headset"></i>
                                <span>Soporte 24/7</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- What's Next Section -->
    <section class="next-steps">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="steps-header text-center" data-aos="fade-up">
                        <h3>¿Qué sigue ahora?</h3>
                        <p>Te guiamos paso a paso en el proceso de entrega</p>
                    </div>
                </div>
            </div>
            
            <div class="row g-4 justify-content-center">
                <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="100">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <div class="step-icon">
                            <i class="bi bi-envelope-check"></i>
                        </div>
                        <h5>Confirmación</h5>
                        <p>Recibirás un email con los detalles de tu pedido</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="200">
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <div class="step-icon">
                            <i class="bi bi-box-seam"></i>
                        </div>
                        <h5>Preparación</h5>
                        <p>Preparamos y empacamos tu producto con cuidado</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="300">
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <div class="step-icon">
                            <i class="bi bi-truck"></i>
                        </div>
                        <h5>Envío</h5>
                        <p>Tu pedido está en camino, ¡pronto lo tendrás!</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="400">
                    <div class="step-card">
                        <div class="step-number">4</div>
                        <div class="step-icon">
                            <i class="bi bi-emoji-smile"></i>
                        </div>
                        <h5>¡Disfruta!</h5>
                        <p>Recibe y disfruta tu nueva compra</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    {% include "footer.html" %}
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="{% static 'js/pago_exitoso.js' %}"></script>
</body>
</html>
