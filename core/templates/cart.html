<!-- filepath: d:\ESCRITORIO\CompueasysApp\core\templates\cart.html -->
{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Carrito de Compras</title>
    <link rel="stylesheet" href="{% static 'css/cart.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container py-5">
        <h1 class="mb-4 text-center">Carrito de Compras</h1>
       <div class="">
                <a href="{% url 'clear_cart' %}" class="btn btn-danger">Vaciar carrito</a>
            </div
        <div class="table-cart">
            
            <table class="table_cart_row">
                <thead class="table_header">
                    <tr>
                        <th>Imagen</th>
                        <th>Producto</th> 
                        <th>Precio</th>
                        <th>Cantidad</th>
                        <th>Subtotal</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody class="table_body">
                   {% for item in cart_items %}
                    <tr>
                        
                        <td>
                            {% if item.product.imagen %}
                                <img src="{{ item.product.imagen.url }}" alt="{{ item.product.name }}" style="width:60px;height:60px;object-fit:cover;" class="rounded">
                            {% else %}
                                <span class="text-muted">Sin imagen</span>
                            {% endif %}
                        </td>
                        <td>{{ item.product.name }}</td>
                        <td>${{ item.product.price|intcomma|cut:"." }}</td>
                        <td>
                            <button class="btn btn-sm btn-outline-secondary">-</button>
                            <span class="mx-2">{{ item.quantity }}</span>
                            <button class="btn btn-sm btn-outline-secondary">+</button>
                        </td>
                        <td>${{ item.subtotal|intcomma|cut:"." }}</td>
                        <td>
                            
                            <a href="{% url 'remove_from_cart' item.product.id %}" class="btn btn-sm btn-danger">Eliminar</a>
                        </td>   
                     
                        
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="text-cantidad-total">
            <p>Cantidad de productos: <span class="text-success">{{ cart_count }}</span></p>
            <h4>Total: <span class="text-success">${{ cart_total|intcomma|cut:"." }}</span></h4>
            
        </div>
   
           
        
        <div class="mt-4">
            <a href="{% url 'store' %}" class="btn btn-outline-secondary">&larr; Seguir comprando</a>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/cart.js' %}"></script>
</body>
</html>