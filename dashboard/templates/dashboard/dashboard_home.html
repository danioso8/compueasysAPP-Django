<!-- filepath: d:\ESCRITORIO\CompueasysApp\dashboard\templates\dashboard\dashboard_home.html -->
{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <title>Dashboard Tienda</title>
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}" />
    <link rel="stylesheet" href="{% static 'css/main.css' %}" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="path/to/font-awesome/css/font-awesome.min.css"
    />
  </head>
  <body>
    {% include 'navbarr.html' %}
    <div class="dashboard-container">
      <aside class="sidebar">
        <ul>
          <li><a href="?view=usuarios">Usuarios</a></li>
          <li><a href="?view=productos">Productos</a></li>
          <li><a href="?view=pedidos">Pedidos</a></li>
          <li><a href="?view=inventario">Inventario</a></li>
        </ul>
      </aside>
      <main class="main-content">
        {% if request.GET.view == "usuarios" %}
        <h2>Usuarios</h2>
        <table>
          <tr>
            <th>Username</th>
            <th>Email</th>
            <th>Staff</th>
            <th>Super</th>
            <th>Activo</th>
            <th>Admin</th>
            <th>Acciones</th>
          
          {% for usuario in usuarios %}
          <tr>
            <td>{{ usuario.username }}</td>
            <td>{{ usuario.email }}</td>
            <td>
              <select name="is_staff" id="modal_is_staff">
                <option value="True">Sí</option>
                <option value="False">No</option>
              </select>
            </td>
            <td>
              <select name="is_superuser" id="modal_is_superuser">
                <option value="True">Sí</option>
                <option value="False">No</option>
              </select>
            </td>
            <td><select name="is_active" id="modal_is_active">
                <option value="True">Sí</option>
                <option value="False">No</option>
              </select>
            </td>
            <td><select name="is_admin" id="modal_is_admin">
                <option value="True">Sí</option>
                <option value="False">No</option>
              </select>
            </td>
            <td>
              <button onclick="openEditModal('{{ usuario.id }}', '{{ usuario.username }}', '{{ usuario.email }}')">Editar</button>
              <a href="{% url 'eliminar_usuario' usuario.id %}">Eliminar</a> 
              {% if not usuario.is_staff %}
              
              {% else %}
              <span>Admin</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
          {% for usuario in usuarios_super %}
          <tr>
            <td>{{ usuario.username }}</td>
            <td>{{ usuario.email }}</td>
             <td>
              <select name="is_staff" id="modal_is_staff">
                <option value="True">Sí</option>
                <option value="False">No</option>
              </select>
            </td>
            <td>
              <select name="is_superuser" id="modal_is_superuser">
                <option value="True">Sí</option>
                <option value="False">No</option>
              </select>
            </td>
            <td><select name="is_active" id="modal_is_active">
                <option value="True">Sí</option>
                <option value="False">No</option>
              </select>
            </td>
            <td><select name="is_admin" id="modal_is_admin">
                <option value="True">Sí</option>
                <option value="False">No</option>
              </select>
            </td>
            <td>
              <button onclick="openEditModal('{{ usuario.id }}', '{{ usuario.username }}', '{{ usuario.email }}')">Editar</button>
              <a href="{% url 'eliminar_usuario' usuario.id %}">Eliminar</a> 
              {% if not usuario.is_staff %}
             
              {% else %}
             
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </table>
        {% elif request.GET.view == "productos" %}
        <h2>Productos</h2>
        <table>
          <tr>
            <th>Nombre</th>
            <th>Stock</th>
            <th>Precio</th>
          </tr>
          {% for producto in productos %}
          <tr>
            <td>{{ producto.name }}</td>
            <td>{{ producto.stock }}</td>
            <td>${{ producto.price }}</td>
          </tr>
          {% endfor %}
        </table>
        {% elif request.GET.view == "pedidos" %}
        <h2>Pedidos</h2>
        <table>
          <tr>
            <th>ID</th>
            <th>Usuario</th>
            <th>Total</th>
            <th>Fecha</th>
          </tr>
          {% for pedido in pedidos %}
          <tr>
            <td>{{ pedido.id }}</td>
            <td>{{ pedido.user }}</td>
            <td>${{ pedido.total }}</td>
            <td>{{ pedido.created_at }}</td>
          </tr>
          {% endfor %}
        </table>
        {% elif request.GET.view == "inventario" %}
        <h2>Inventario</h2>
        <p>Aquí puedes mostrar tu inventario...</p>
        {% else %}
        <h2>Bienvenido al Dashboard</h2>
        <p>Selecciona una opción en la barra lateral.</p>
        {% endif %}
      </main>
    </div>


    <!-- Modal de edición -->
                <div id="editModal" class="modal1">
                    <div class="modal-content1">
                        <span class="close" onclick="closeEditModal()">&times;</span>
                        <h3>Editar Usuario</h3>
                        <form id="editForm" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="user_id" id="modal_user_id">
                            <label>Username:</label>
                            <input type="text" name="username" id="modal_username" required>
                            <label>Email:</label>
                            <input type="email" name="email" id="modal_email" required>
                            <label>Contraseña (dejar en blanco para no cambiar):</label>
                            <input type="password" name="password" id="modal_password">
                            <label>celular:</label>
                            <input type="text" name="celular" id="modal_celular">
                            <label>direccion:</label>
                            <input type="text" name="direccion" id="modal_direccion">
                            <label>ciudad:</label>
                            <input type="text" name="ciudad" id="modal_ciudad"> 
                            <label>pais:</label>
                            <input type="text" name="pais" id="modal_pais"> 
                            <label>codigo_postal:</label>
                            <input type="text" name="codigo_postal" id="modal_codigo_postal">
                            <label> created_at:</label>
                            <input type="date" name="created_at" id="modal_created_at"> 
                            <label>Fecha de nacimiento:</label>
                            <input type="date" name="fecha_nacimiento" id="modal_fecha_nacimiento">
                            <label>Genero:</label>
                            <input type="text" name="genero" id="modal_genero">
                            <button type="submit">Guardar</button>
                        </form>
                    </div>
                </div>
  </body>
  <script src="{% static 'js/dashboard.js' %}"></script>
</html>
